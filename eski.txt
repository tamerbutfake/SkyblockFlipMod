
package attribute_handlers;



import api_handlers.api_requester;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class star_counter {
    //private static String stars;
    private static int start_index;
    private static int end_index;
    private static int number_of_stars = 0;
    private static String sub_string;
    private static List<String> item_names = api_requester.getItem_nameS();
    private static List<String> item_uuids = api_requester.getItem_UUIDS();
    private static Map<String,Integer> stars_list = new HashMap<>();
    /*public static void get_stars_old() {
        item_data = decompresser.getItem_data();
        if (item_data.contains("\u272A")) {
                actual_item_data = item_data.substring(1, item_data.length());
                start_index = item_data.indexOf("Name");
                end_index = item_data.indexOf("ExtraAttributes", start_index);
                System.out.println(item_data.length());
                System.out.println("start_index=" + start_index);
                stars = item_data.substring(start_index, end_index);
                for (int i = 0; i < stars.length(); i++) {
                    if (stars.charAt(i) == '\u272A') {
                        number_of_stars++;
                    }

                }
                System.out.println("yildiz_sayisi=" + number_of_stars);

        }
    }

     */
    public static int get_stars(String item_name){
        number_of_stars=0;
        if(item_name.contains("✪")){
            System.out.println("yeee");
            start_index=item_name.indexOf("✪");
            end_index=start_index;
            while (end_index < item_name.length() && item_name.charAt(end_index) != '\u272A') {
                end_index++;
            }
            StringBuilder sb =new StringBuilder(item_name);
            sb.append("                 ");
            sub_string=sb.substring(start_index,end_index+15);
            System.out.println("start index="+start_index);
            System.out.println("end index="+end_index);
            for (int i = 0; i < sub_string.length(); i++) {
                if(sub_string.charAt(i)=='\u272A'){
                    number_of_stars++;
                }
            }

        }

        else{
            System.out.println('\u272A');
        }

        return number_of_stars;
    }
    public static Map<String, Integer> getNumberOfStars(){
        for (int i = 0; i < item_names.size(); i++) {
            stars_list.put(item_uuids.get(i), get_stars(item_names.get(i)));
        }
        item_names.clear();
        item_uuids.clear();
        start_index=0;
        end_index=0;
        return stars_list;
    }
}

